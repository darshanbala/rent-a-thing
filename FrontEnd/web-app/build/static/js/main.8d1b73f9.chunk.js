(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{146:function(e,t,n){},17:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(29),i=n.n(s),c=n(15),o=n(3),u=n.n(o),l=n(4),h=n(5),d=n(6),p=n(7),m=n(8),j=(n(17),n(9)),b=n(14),f=n(11),v=n(1),g=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={item:"",onHomePage:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},console.log(""),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.onHomePage);try{this.setState({onHomePage:this.props.onHomePage})}catch(e){}}},{key:"componentDidUpdate",value:function(e,t){this.state.item!==t.item&&(this.state.onHomePage||this.props.submitSearch(this.state)),console.log("")}},{key:"componentWillUnmount",value:function(){console.log("")}},{key:"changesState",value:function(){}},{key:"formSubmission",value:function(e){e.preventDefault(),this.state.onHomePage?this.setState({onHomePage:!1}):this.props.submitSearch(this.state)}},{key:"render",value:function(){var e=this,t=this.state,n=t.item;t.dateFrom,t.dateTo,t.location;return Object(v.jsx)("section",{children:Object(v.jsxs)("form",{type:"submit",className:"searchBar",children:[Object(v.jsx)("div",{children:Object(v.jsx)("span",{children:Object(v.jsx)("input",{type:"text",name:"item",id:"searchForItem",value:n,onChange:function(t){return e.handleChange(t)},placeholder:"Rent-A-..."})})}),Object(v.jsx)("div",{})]})})}}]),n}(a.Component),O=(n(40),n(348)),x=(n(95),["things-page-card","myrentals-page-card"]);function y(e){var t=e.id,n=e.name,a=e.price,r=e.cardType,s=e.img_url,i=e.rented_from,c=e.rented_until,o=e.trader_first_name,u=e.trader_last_name,l=x.includes(r);if(l&&"things-page-card"===r)return Object(v.jsx)(j.b,{to:"/item/".concat(t),children:Object(v.jsxs)("div",{className:r,children:[Object(v.jsx)("img",{className:"".concat(r,"-img"),src:s||"logo192.png",alt:n,style:{height:"192px"}}),Object(v.jsxs)("div",{className:"".concat(r,"-text-container"),children:[Object(v.jsx)("h4",{children:Object(v.jsx)("b",{children:n})}),Object(v.jsxs)("p",{children:["Price: \xa3",a]})]})]})});if(l&&"myrentals-page-card"===r){var h=Date.now(),d=new Date(c),p=null;return h>d?p="overdue":h<d&&(p="notDueYet"),Object(v.jsxs)("div",{id:p,className:r,children:[Object(v.jsx)("img",{src:s||"logo192.png",alt:n,class:"rentals-page-card-img"}),Object(v.jsxs)("div",{className:"".concat(r,"-container"),children:[Object(v.jsx)("h4",{children:Object(v.jsx)("b",{children:n})}),Object(v.jsxs)("p",{children:["Pick up date: ",Object(O.a)(new Date(i),"E dd MMMM, y")]}),Object(v.jsxs)("p",{children:["Drop off date: ",Object(O.a)(new Date(c),"E dd MMMM, y")]}),Object(v.jsxs)("p",{children:["You're dealing with: ",o," ",u]}),Object(v.jsxs)("p",{children:["Price: \xa3",a]})]})]})}}var k=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={items:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.items,this.setState({items:t});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.props){e.next=4;break}return e.next=3,this.setState({items:[]});case 3:this.setState({items:this.props.items});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleItemClick",value:function(e){}},{key:"render",value:function(){var e=this.props.items;return e[0]?Object(v.jsx)("div",{className:"item-list",children:e.map((function(e){var t=e.id,n=e.name,a=e.price,r=(e.is_available,e.img_url);return Object(v.jsx)(y,{id:t,name:n,price:a,img_url:r,cardType:"things-page-card"})}))}):Object(v.jsx)("p",{children:"Loading...."})}}]),n}(a.Component),w=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).state={items:null,categoryId:0,searchCriteria:{searchingFor:null,date_from:null,date_to:null,location:null},all:null,currentLocation:{id:0,name:null},cityOptions:null,categoryOptions:null,showMenu:!1,locationFilteredItemList:"",propsLoaded:!1,searchRadiusOptions:["None","0.5","1.0","1.5","2.0","2.5","3.0","3.5","4.0","4.5","5.0"],selectedSearchRadius:"None",locationAndRadiusFilteredItems:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.filterBy();case 2:return e.next=4,this.getCities();case 4:return e.next=6,this.getCategories();case 6:return e.next=8,this.setState({currentLocation:{id:0},selectedSearchRadius:"None"});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.selectedSearchRadius,r=n.selectedSearchRadius,s=this.state.currentLocation.id,i=n.currentLocation.id,this.props===t){e.next=18;break}if(!1!==this.state.propsLoaded){e.next=16;break}return e.next=8,this.setState({categoryId:this.props.searchCriteria.categoryId,propsLoaded:!0});case 8:if(e.prev=8,!this.props.searchCriteria.searchingFor.item){e.next=12;break}return e.next=12,this.setState({searchCriteria:{searchingFor:this.props.searchCriteria.searchingFor.item}});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:return e.next=18,this.filterBy();case 18:if(this.state.categoryId===n.categoryId&&this.state.searchCriteria.searchingFor===n.searchCriteria.searchingFor){e.next=21;break}return e.next=21,this.filterBy();case 21:if(a==r&&s==i){e.next=24;break}return e.next=24,this.filterBy();case 24:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCities",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/cities"),{method:"GET",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({cityOptions:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showMenu",value:function(e){e.preventDefault(),this.setState({showMenu:!0})}},{key:"changeCity",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s,i,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;try{n=t.target.value}catch(u){n=t}if("0"!==n){e.next=8;break}return e.next=5,this.setState({currentLocation:{id:null,name:null}});case 5:return e.abrupt("return");case 8:n=n--;case 9:return e.next=11,fetch("".concat("https://rent-a-thing.herokuapp.com/","/getCity"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cityId:n})});case 11:return a=e.sent,e.next=14,a.json();case 14:return r=e.sent,s=r[0].name,i=r[0].id,e.next=19,this.setState({currentLocation:{id:i,name:s}});case 19:return c=this.state,o=c.items,l=c.locationFilteredItemList,e.next=22,this.filterByLocation(o);case 22:l=e.sent,this.setState({locationFilteredItemList:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCategories",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/categories"),{method:"GET",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({categoryOptions:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterByLocation",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state;case 2:if(n=e.sent,!(a=n.currentLocation).id){e.next=9;break}return r=t.filter((function(e){return e.city_id===a.id})),e.abrupt("return",r);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterByLocationAndRadius",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s,i,c,o,l,h,d,p,m,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,a=n.currentLocation,r=n.selectedSearchRadius,s=[],"None"===r){e.next=21;break}return i=a.id,e.next=6,fetch("".concat("https://rent-a-thing.herokuapp.com/","/currentLocationData"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentLocationId:i})});case 6:return c=e.sent,e.next=9,c.json();case 9:o=e.sent,m=o[0].latitude.slice(0,1),j=o[0].longitude.slice(0,1),"-"===m?(l=o[0].latitude.slice(1),h=o[0].latitude.slice(1)):(l=o[0].latitude.slice(0),h=o[0].latitude.slice(0)),"-"===j?(d=o[0].longitude.slice(1),p=o[0].longitude.slice(1)):(d=o[0].longitude.slice(0),p=o[0].longitude.slice(0)),l=parseFloat(l)+parseFloat(r),h=parseFloat(h)-parseFloat(r),d=parseFloat(d)+parseFloat(r),p=parseFloat(p)-parseFloat(r),t.forEach((function(e){var t,n,a=e.latitude.slice(0,1),r=e.longitude.slice(0,1);t="-"===a?e.latitude.slice(1):e.latitude.slice(0),n="-"===r?e.longitude.slice(1):e.longitude.slice(0),t=parseFloat(t),n=parseFloat(n),t<l&&t>h&&n<d&&n>p&&s.push(e)})),e.next=22;break;case 21:s=this.filterByLocation(t);case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterBy",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,r,s,i,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,t.all,t.locationFilteredItemList,t.searchCriteria,n=this.state.categoryId,a="";try{a=this.props.searchCriteria.searchingFor.item}catch(u){}if(r=[],!n||"0"===n){e.next=23;break}return this.state.totally_unfiltered&&this.setState({totally_unfiltered:!1}),e.next=9,fetch("".concat("https://rent-a-thing.herokuapp.com/","/searchByCategory"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({category_id:n,searchCriteria:a})});case 9:return s=e.sent,e.next=12,s.json();case 12:return i=e.sent,e.next=15,i[0];case 15:if(!e.sent){e.next=21;break}return e.next=18,this.filterByLocationAndRadius(i);case 18:c=e.sent,this.setState({locationAndRadiusFilteredItems:c}),this.setState({items:[],locationFilteredItems:[]});case 21:e.next=50;break;case 23:if(!a){e.next=49;break}return this.state.totally_unfiltered&&this.setState({totally_unfiltered:!1}),e.next=27,fetch("".concat("https://rent-a-thing.herokuapp.com/","/searchByFilter"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchCriteria:a})});case 27:return o=e.sent,e.next=30,o.json();case 30:return r=e.sent,e.next=33,r[0];case 33:if(!e.sent){e.next=46;break}return e.next=36,this.filterByLocationAndRadius(r);case 36:return l=e.sent,e.t0=this,e.next=40,r;case 40:e.t1=e.sent,e.t2=l,e.t3={items:e.t1,locationAndRadiusFilteredItems:e.t2},e.t0.setState.call(e.t0,e.t3),e.next=47;break;case 46:this.setState({items:[],locationFilteredItems:[]});case 47:e.next=50;break;case 49:this.setState({totally_unfiltered:!0});case 50:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeSearchRadius",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedSearchRadius:t.target.value});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeCategory",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,this.setState({categoryId:n}),e.next=5,this.filterBy();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.totally_unfiltered,a=t.items,r=t.categoryId,s=(t.searchParams,t.date_from,t.date_to,t.all,t.cityOptions),i=t.categoryOptions,c=(t.locationFilteredItems,t.locationFilteredItemList,t.currentLocation),o=t.searchRadiusOptions,u=t.selectedSearchRadius,l=t.locationAndRadiusFilteredItems;return a?Object(v.jsxs)("section",{children:[i&&Object(v.jsxs)("select",{name:"categories",value:r,onChange:function(t){return e.changeCategory(t)},children:[Object(v.jsx)("option",{value:0,children:"All categories"}),i.map((function(e){var t=e.id,n=e.name;return Object(v.jsx)("option",{id:t,name:t,value:t,children:n},t)}))]}),s&&Object(v.jsxs)("select",{name:"cities",value:c.id,onChange:function(t){return e.changeCity(t)},children:[Object(v.jsx)("option",{value:0,children:"All locations"}),s.map((function(e){var t=e.id,n=e.name;return Object(v.jsx)("option",{id:t,name:c.id,value:t,children:n},t)}))]}),o&&Object(v.jsx)("select",{name:"selectedSearchRadius",value:u,onChange:function(t){return e.changeSearchRadius(t)},children:o.map((function(e){return Object(v.jsx)("option",{id:e,name:u,value:e,children:e},e)}))}),!n&&Object(v.jsx)(k,{items:l,cookieCheck:this.props.cookieCheck}),n&&Object(v.jsx)("p",{children:"Why not search for something?"})]}):Object(v.jsx)("p",{children:"Loading..."})}}]),n}(r.a.Component),C=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={submissionConfirmed:!1,searchCriteria:{category:null,searchingFor:!1},onHomePage:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},console.log(""),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.searchParams&&this.setState({searchCriteria:this.props.searchParams}),e.t0=console,e.next=4,this.props.onHomePage;case 4:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),!0===this.props.onHomePage&&this.setState({onHomePage:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){if(console.log(""+JSON.stringify(this.props)),e!==this.props)try{!1===this.props.onHomePage&&void 0!==this.props.onHomePage?this.setState({onHomePage:!1,searchCriteria:{category:this.props.categoryId}}):this.setState({onHomePage:!0})}catch(n){this.setState({onHomePage:!0})}}},{key:"componentWillUnmount",value:function(){console.log(""),this.setState({onHomePage:""})}},{key:"changesState",value:function(){}},{key:"submitSearch",value:function(e){this.setState({submissionConfirmed:!0,searchCriteria:{searchingFor:e}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.submissionConfirmed,a=t.searchCriteria,r=t.onHomePage;return console.log(a),n||!r?Object(v.jsxs)("section",{children:[Object(v.jsx)(g,{onHomePage:r,submitSearch:function(t){return e.submitSearch(t)}}),Object(v.jsx)(w,{searchCriteria:a,cookieCheck:this.props.cookieCheck})]}):Object(v.jsxs)("section",{children:[Object(v.jsx)(g,{submitSearch:function(t){return e.submitSearch(t)}}),Object(v.jsxs)("section",{children:[Object(v.jsx)("h1",{id:"welcome_message",children:"Welcome to Rent-A-Thing!"}),Object(v.jsx)("h3",{id:"welcome_message",children:"Where you can rent any thing our community of users has to offer."}),Object(v.jsx)("h3",{id:"welcome_message",children:"What's mine is yours."}),Object(v.jsx)("h3",{id:"handshake",children:"\ud83e\udd1d"}),Object(v.jsx)("p",{id:"terms_and_conditions",children:"Terms and conditions apply..."}),Object(v.jsx)("br",{})]})]})}}]),n}(a.Component),S=n(38),_=(a.Component,n(18)),I=function(e){var t=e.handleImgUrl,n=Object(a.useState)(""),r=Object(_.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(""),o=Object(_.a)(c,2),u=o[0],l=o[1];return Object(v.jsx)("div",{className:"img-upload",children:Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&t(u)},children:[Object(v.jsx)("input",{type:"file",name:s,onChange:function(e){!function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){l(t.result),i(e.name)}}(e.target.files[0])}}),u&&Object(v.jsx)("img",{src:u,alt:s,style:{height:"300px"}}),Object(v.jsx)("button",{type:"submit",children:"Upload"})]})})},N=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={valid_new_user:!1,first_name:"",last_name:"",img_url:"",email:"",password1:"",password2:"",DoB:"",phone_number:"",address_1:"",address_2:"",city:{id:null,name:null},postcode:"",validationMessage:null,validEmail:!0,successfullySubmitted:!1,cityOptions:null,hasChosenCountry:!1},n.handleImgUrl=function(e){n.setState({img_url:e}),console.log(n.state.img_url)},console.log(""),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.cookieCheck(),e.next=3,fetch("".concat("https://rent-a-thing.herokuapp.com/","/cities"),{method:"GET",credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({cityOptions:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.email===this.state.email||""===this.state.email){e.next=3;break}return e.next=3,this.checkValidEmail();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("")}},{key:"updateState",value:function(e){}},{key:"updateInfo",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(f.a)({},n,a))}},{key:"submitEmailInfo",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=this.state,n.email,n.password1,n.password2,this.validateSubmit("first")?this.setState({valid_new_user:!0,validationMessage:null}):this.setState({validationMessage:"Please ensure all fields are complete and valid"});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitUser",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,s,i,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.validateSubmit("second")){e.next=26;break}return this.setState({validationMessage:null}),a={first_name:this.state.first_name,last_name:this.state.last_name,img_url:this.state.img_url,email:this.state.email,password1:this.state.password1,password2:this.state.password2,DoB:this.state.DoB,phone_number:this.state.phone_number,address_1:this.state.address_1,address_2:this.state.address_2,city:this.state.city.id,postcode:this.state.postcode},e.next=6,fetch("".concat("https://rent-a-thing.herokuapp.com/","/createAccount"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 6:return r=e.sent,e.next=9,r.json();case 9:if(200!==e.sent.code){e.next=23;break}return e.next=13,fetch("".concat("https://rent-a-thing.herokuapp.com/","/getID"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.email)});case 13:return i=e.sent,e.next=16,i.json();case 16:c=e.sent,console.log(c.id),this.setState({successfullySubmitted:!0}),o=n(10),s={username:this.state.first_name},Object(f.a)(s,"username","".concat(this.state.first_name).concat(c.id)),Object(f.a)(s,"secret",this.state.email),o({method:"post",url:"https://api.chatengine.io/users/",headers:{"PRIVATE-KEY":"ab826fa0-1758-4f20-9213-a0ce97bf6a5c"},data:s}).then((function(e){})).catch((function(e){console.log(e)}));case 23:this.props.cookieCheck(),e.next=27;break;case 26:this.setState({validationMessage:"Please ensure all fields are complete and valid"});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkValidEmail",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.email,e.next=3,fetch("".concat("https://rent-a-thing.herokuapp.com/","/isValidNewEmail"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.next=9,a;case 9:if(e.t0=e.sent,e.t1=this.state.validEmail,e.t0===e.t1){e.next=13;break}this.setState({validEmail:a});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLive",value:function(e){var t=this.state,n=t.first_name,a=t.last_name,r=t.email,s=t.password1,i=t.password2,c=t.DoB,o=t.phone_number;t.address_1,t.address_2,t.city,t.postcode;switch(e){case n:case a:case r:break;case s:if(s.length<8)return Object(v.jsx)("p",{className:"error errorCreateAccount",children:"Password must be at least 8 characters"});break;case i:if(i!==s)return Object(v.jsx)("p",{className:"error errorCreateAccount",children:"Passwords do not match"});break;case c:break;case o:if("+"===o[0]){if(12!==o.length)return Object(v.jsx)("p",{className:"error errorCreateAccount",children:"Please enter a valid phone number"})}else if(11!==o.length)return Object(v.jsx)("p",{className:"error errorCreateAccount",children:"Please enter a valid phone number"});var u,l=Object(S.a)(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(isNaN(h))return Object(v.jsx)("p",{className:"error errorCreateAccount",children:"Please enter a valid phone number"})}}catch(d){l.e(d)}finally{l.f()}}}},{key:"validateSubmit",value:function(e){var t=this.state,n=t.validEmail,a=t.password1,r=t.password2,s=t.phone_number;if("first"===e)return!(r!==a||a.length<8||!n);if("second"===e){if("+"===s[0]){if(12!==s.length)return!1}else if(11!==s.length)return!1;var i,c=Object(S.a)(s);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(isNaN(o))return!1}}catch(u){c.e(u)}finally{c.f()}return!0}}},{key:"changeCity",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.cityOptions,t.preventDefault(),a=t.target.innerHTML,r=n.filter((function(e){if(e.name===a)return e})),s=r[0].id,e.next=7,fetch("".concat("https://rent-a-thing.herokuapp.com/","/getCity"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cityId:s})});case 7:return i=e.sent,e.next=10,i.json();case 10:c=e.sent,this.setState({city:{id:c[0].id,name:c[0].name},hasChosenCountry:!0,cityName:c[0].name});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleKeyDown",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.valid_new_user,console.log(t.key+" key pressed"),n){e.next=8;break}if("Enter"!==t.key){e.next=6;break}return e.next=6,this.submitEmailInfo();case 6:e.next=11;break;case 8:if("Enter"!==t.key){e.next=11;break}return e.next=11,this.submitUser();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state,a=n.successfullySubmitted,r=n.validEmail,s=n.validationMessage,i=n.valid_new_user,c=n.first_name,o=n.last_name,u=n.email,l=n.password1,h=n.password2,d=n.DoB,p=n.phone_number,m=n.address_1,j=n.address_2,g=n.city,x=n.postcode,y=n.cityOptions,k=n.hasChosenCountry;n.cityName;return a?Object(v.jsx)(b.a,{to:"/"}):i?Object(v.jsxs)("section",{children:[Object(v.jsx)("h1",{children:"Submit your details"}),Object(v.jsx)("div",{className:"SubmissionForm",children:Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Profile Picture:"}),Object(v.jsx)(I,{handleImgUrl:this.handleImgUrl})]})}),Object(v.jsxs)("form",{className:"SubmissionForm SubmissionFormCreateAccount",children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"first_name",value:"First name: ",children:"First name: "}),Object(v.jsx)("input",{type:"text",name:"first_name",id:"first_name",value:c,onKeyDown:function(e){return t.handleKeyDown(e)},onChange:function(e){return t.updateInfo(e)}})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"last_name",value:"Last name: ",children:"Last name: "}),Object(v.jsx)("input",{type:"text",name:"last_name",id:"last_name",value:o,onChange:function(e){return t.updateInfo(e)}})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"DoB",value:"Date of birth : ",children:"Date of birth : "}),Object(v.jsx)("input",{type:"date",name:"DoB",id:"DoB",value:d,max:Object(O.a)(new Date,"y-MM-d"),onChange:function(e){return t.updateInfo(e)}})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"phone_number",value:"Phone number: ",children:"Phone number: "}),Object(v.jsx)("input",{type:"text",name:"phone_number",id:"phone_number",value:p,onChange:function(e){return t.updateInfo(e)}}),Object(v.jsx)("div",{children:this.validateLive(p)})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"address_1",value:"Address line 1: ",children:"Address line 1: "}),Object(v.jsx)("input",{type:"text",name:"address_1",id:"address_1",value:m,onChange:function(e){return t.updateInfo(e)}})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"address_2",value:"Address line 2: ",children:"Address line 2: "}),Object(v.jsx)("input",{type:"text",name:"address_2",id:"address_2",value:j,onChange:function(e){return t.updateInfo(e)}})]}),Object(v.jsx)("section",{children:Object(v.jsxs)("div",{className:"cityParent",children:[Object(v.jsx)("label",{htmlFor:"city",value:"City : ",children:"City : "}),Object(v.jsx)("br",{}),Object(v.jsxs)("section",{id:"cities_section",children:[!k&&y.map((function(e){var n=e.id,a=e.name;return Object(v.jsx)("div",{className:"cityCard",onClick:function(e){return t.changeCity(e)},value:a,children:a},n)})),k&&Object(v.jsx)("div",{className:"chosenCityCard",children:g.name})]})]})}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"postcode",value:"Postcode: ",children:"Postcode: "}),Object(v.jsx)("input",{type:"text",name:"postcode",id:"postcode",value:x,onChange:function(e){return t.updateInfo(e)}})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("input",{type:"submit",name:"submit",value:"Submit details",onClick:function(e){return t.submitUser(e)}}),s&&Object(v.jsx)("p",{className:"error",children:s})]})]})]}):Object(v.jsxs)("section",{children:[Object(v.jsx)("h1",{className:"centered",children:"Create an account"}),Object(v.jsxs)("form",{className:"SubmissionForm SubmissionFormCreateAccount",children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"email",value:"Email address: ",children:"Email address: "}),Object(v.jsx)("input",{type:"text",name:"email",id:"email",value:u,onKeyDown:function(e){return t.handleKeyDown(e)},onChange:function(e){return t.updateInfo(e)}}),!r&&Object(v.jsx)("p",{className:"error errorCreateAccount",children:"Email address is unavailable"})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{htmlFor:"password1",value:"Password: ",children:"Password: "}),Object(v.jsx)("input",{type:"password",name:"password1",id:"password1",value:l,onChange:function(e){return t.updateInfo(e)}}),Object(v.jsx)("div",{children:this.validateLive(l)})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",(e={htmlFor:"password2",value:"Re-enter password: "},Object(f.a)(e,"value",h),Object(f.a)(e,"children","Re-enter password: "),e)),Object(v.jsx)("input",{type:"password",name:"password2",id:"password2",onChange:function(e){return t.updateInfo(e)}}),Object(v.jsx)("div",{children:this.validateLive(h)})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("input",{type:"submit",onClick:function(e){return t.submitEmailInfo(e)},value:"Create account"}),s&&Object(v.jsx)("p",{className:"error errorCreateAccount",children:s})]})]})]})}}]),a}(a.Component),D=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).initialState={email:"",password:"",touched:{email:!1,password:!1},successfullySubmitted:!1},e.state=e.initialState,e}return Object(d.a)(n,[{key:"resetForm",value:function(){this.setState(this.initialState)}},{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.cookieCheck();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"markAsTouched",value:function(e){var t=Object(c.a)({},this.state.touched);t[e]=!0,this.setState({touched:t})}},{key:"emailErrors",value:function(){var e=this.state,t=e.email;return!!e.touched.email&&(t.length<10?"Email is too short":t.length>50?"Email is too long":void 0)}},{key:"passwordErrors",value:function(){var e=this.state,t=e.password;return!!e.touched.password&&(t.length<8?"Password is too short":t.length>50?"Password is too long":void 0)}},{key:"handleSubmit",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state,a=n.email,r=n.password,t.preventDefault(),this.resetForm(),e.next=5,fetch("".concat("https://rent-a-thing.herokuapp.com/","/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:r})});case 5:return s=e.sent,e.next=8,s.json();case 8:200===e.sent.code&&(this.props.cookieCheck(),this.setState({successfullySubmitted:!0}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.password,r=t.successfullySubmitted;t.touched;return r?Object(v.jsx)(b.a,{to:"/"}):Object(v.jsxs)("section",{children:[Object(v.jsx)("h1",{className:"centered",children:"Login to your account"}),Object(v.jsxs)("form",{className:"SubmissionForm SubmissionFormLogin",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Email: "}),Object(v.jsx)("input",{value:n,onChange:function(t){return e.setState({email:t.target.value})},onBlur:function(){return e.markAsTouched("email")},type:"text"}),this.emailErrors()&&Object(v.jsx)("p",{className:"error errorLogin",children:this.emailErrors()})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Password: "}),Object(v.jsx)("input",{value:a,onChange:function(t){return e.setState({password:t.target.value})},onBlur:function(){return e.markAsTouched("password")},type:"password"}),this.passwordErrors()&&Object(v.jsx)("p",{className:"error errorLogin",children:this.passwordErrors()})]}),Object(v.jsx)("input",{type:"submit",value:"Login",disabled:this.emailErrors()||this.passwordErrors()})]})]})}}]),n}(a.Component),E=(n(177),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={message:"",chatId:0,success:""},e}return Object(d.a)(a,[{key:"sendChatId",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,s,i,c,o,l=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state,r=a.message,s=a.chatId,console.log(r),console.log(s),i=n(10),c={text:r},o={method:"post",url:"https://api.chatengine.io/chats/".concat(s,"/messages/"),headers:{"Project-ID":"738df1f7-4780-4c48-b34f-0938273bcb5d","User-Name":this.props.loggedInUser,"User-Secret":this.props.secret},data:c},i(o).then((function(e){l.setState({message:""});var t;t=Object(v.jsx)("strong",{children:"Message Sent"}),l.setState({success:t})}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,s,i=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=n(10),r={usernames:[this.props.ownerName],is_direct_chat:!0},s={method:"put",url:"https://api.chatengine.io/chats/",headers:{"Project-ID":"738df1f7-4780-4c48-b34f-0938273bcb5d","User-Name":this.props.loggedInUser,"User-Secret":this.props.secret},data:r},a(s).then((function(e){var t=JSON.stringify(e.data.id);i.setState({chatId:t}),i.sendChatId(i.state.chatId)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.message,n="Send a message to ".concat(this.props.ownerName);return Object(v.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(v.jsx)("textarea",{name:"message",placeholder:n,value:t,onChange:function(t){return e.setState({message:t.target.value})}}),Object(v.jsx)("input",{type:"submit",value:"Send"}),this.state.success]})}}]),a}(a.Component)),F=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).initialState={item:[],itemDuringChange:[],fields:{rentFrom:"",rentUntil:""},rentalConfirmed:!1,errorMessage:"",errorMessageEditName:"",errorMessageEditDescription:"",usersOwnItem:!1,itemIsInEditMode:!1,descriptionIsInEditMode:!1,redirect:{clicked:!1,user:null},itemWasFound:!0},e.state=e.initialState,e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{fields:Object(c.a)(Object(c.a)({},e.fields),{},Object(f.a)({},a,r)),errorMessage:"",rentalConfirmed:!1}}))},e.submitForm=Object(l.a)(u.a.mark((function t(){var n,a,r,s,i,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.item.id,a=e.state.fields,r=a.rentFrom,s=a.rentUntil,r&&s){t.next=5;break}return e.setState({errorMessage:"Please enter a valid rent from and rent until date"}),t.abrupt("return");case 5:return r>s&&e.setState({errorMessage:"You cannot time travel (please set the return date to be later than the rental date)"}),t.next=8,fetch("".concat("https://rent-a-thing.herokuapp.com/","/rentItem"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemId:n,rentFrom:r,rentUntil:s})});case 8:return i=t.sent,t.next=11,i.json();case 11:c=t.sent,(o=c.errorMessage)?e.setState({errorMessage:o}):e.setState({fields:e.initialState.fields,rentalConfirmed:!0});case 14:case"end":return t.stop()}}),t)}))),e.changeEditModeItem=function(){e.state.usersOwnItem?e.setState((function(t){return{itemDuringChange:Object(c.a)(Object(c.a)({},t.itemDuringChange),{},{name:e.state.item.name}),itemIsInEditMode:!e.state.itemIsInEditMode,errorMessageEditName:""}})):e.setState({itemIsInEditMode:!1})},e.changeEditModeDescription=function(){e.state.usersOwnItem?e.setState((function(t){return{itemDuringChange:Object(c.a)(Object(c.a)({},t.itemDuringChange),{},{description:e.state.item.description}),descriptionIsInEditMode:!e.state.descriptionIsInEditMode,errorMessageEditDescription:""}})):e.setState({descriptionIsInEditMode:!1})},e.handleEditChangeName=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{itemDuringChange:Object(c.a)(Object(c.a)({},e.itemDuringChange),{},Object(f.a)({},a,r)),errorMessageEditName:""}}))},e.handleEditChangeDescription=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{itemDuringChange:Object(c.a)(Object(c.a)({},e.itemDuringChange),{},Object(f.a)({},a,r)),errorMessageEditDescription:""}}))},e.updateItemNameValue=Object(l.a)(u.a.mark((function t(){var n,a,r,s,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.item,""!==(a=e.state.itemDuringChange).name){t.next=7;break}return e.setState({errorMessageEditName:"Item name cannot be blank"}),t.abrupt("return");case 7:e.setState({item:a,itemIsInEditMode:!1});case 8:return r=n.id,s=n.owner_id,i=a.name,t.next=13,fetch("".concat("https://rent-a-thing.herokuapp.com/","/editItemName"),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemId:r,ownerId:s,changedValue:i})});case 13:case"end":return t.stop()}}),t)}))),e.updateItemDescriptionValue=Object(l.a)(u.a.mark((function t(){var n,a,r,s,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.item,""!==(a=e.state.itemDuringChange).description){t.next=7;break}return e.setState({errorMessageEditDescription:"Item description cannot be blank"}),t.abrupt("return");case 7:e.setState({item:a,itemIsInEditMode:!1});case 8:return e.setState({item:a,descriptionIsInEditMode:!1}),r=n.id,s=n.owner_id,i=a.description,t.next=14,fetch("".concat("https://rent-a-thing.herokuapp.com/","/editItemDescription"),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemId:r,ownerId:s,changedValue:i})});case 14:case"end":return t.stop()}}),t)}))),e.changeItemAvailability=Object(l.a)(u.a.mark((function t(){var n,a,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.item,a=n.id,r=n.owner_id,s=!n.is_available,e.setState((function(e){return{item:Object(c.a)(Object(c.a)({},e.item),{},{is_available:s})}})),t.next=7,fetch("".concat("https://rent-a-thing.herokuapp.com/","/changeItemAvailability"),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemId:a,ownerId:r,isAvailable:s})});case 7:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,r,s,i,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.cookieCheck(),t=window.location.href,n=t.split("/"),a=n[n.length-1],e.next=6,fetch("".concat("https://rent-a-thing.herokuapp.com/","/item/").concat(a),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});case 6:return r=e.sent,e.next=9,r.json();case 9:s=e.sent,i=s.itemInArray,c=s.usersOwnItem,0===i.length?this.setState({itemWasFound:!1}):(o=i[0],this.setState({item:o,itemDuringChange:o,usersOwnItem:c}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"goToUserProfile",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.item,n=t.owner_id,e.next=4,fetch("".concat("https://rent-a-thing.herokuapp.com/","/visitAnotherProfile"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n})});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,this.setState({redirect:{clicked:!0,user:r}});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.item,n=this.state.itemDuringChange,a=this.state.fields,r=a.rentFrom,s=a.rentUntil,i=this.state.errorMessage,c=this.state.errorMessageEditName,o=this.state.errorMessageEditDescription,u=this.state.rentalConfirmed,l=this.state.usersOwnItem,h=this.state.itemIsInEditMode,d=this.state.descriptionIsInEditMode,p=this.state.redirect.clicked,m=this.state.itemWasFound,j=null;return p&&(j=this.state.redirect.user),console.log("redirect clicked: "+j),console.log(this.props.user,"user is"),Object(v.jsxs)(v.Fragment,{children:[!m&&Object(v.jsx)("h1",{children:"Error 404: Item was not found"}),p&&Object(v.jsx)(b.a,{to:{pathname:"/visitingUser",state:{user:j,justVisiting:!0}}}),m&&Object(v.jsxs)("div",{className:"item-page-container",children:[Object(v.jsx)("div",{className:"item-page-image",children:Object(v.jsx)("img",{src:t.img_url,alt:t.name})}),Object(v.jsxs)("div",{className:"item-page-content-container",children:[Object(v.jsxs)("div",{className:"item-page-name",children:[h?Object(v.jsxs)("h1",{children:[Object(v.jsx)("input",{className:"edit-box",type:"text",name:"name",id:"name",value:n.name,onChange:function(t){return e.handleEditChangeName(t)}}),Object(v.jsx)("button",{className:"cancel-edit",onClick:this.changeEditModeItem,children:"X"}),Object(v.jsx)("button",{className:"confirm-edit",onClick:this.updateItemNameValue,children:"OK"})]}):Object(v.jsxs)("h1",{children:[t.name," ",l&&Object(v.jsx)("button",{className:"edit-button",onClick:this.changeEditModeItem,children:"Edit"})]}),c&&Object(v.jsx)("p",{className:"item-page-error",children:c}),Object(v.jsxs)("p",{children:["Offered by ",Object(v.jsxs)("span",{id:"user_profile_link",onClick:function(){return e.goToUserProfile()},children:[t.first_name," ",t.last_name]})]})]}),!l&&Object(v.jsx)("div",{className:"item-page-rent",children:Object(v.jsxs)("div",{children:[t.is_available&&Object(v.jsxs)("form",{children:[Object(v.jsxs)("span",{className:"item-page-form-field",children:[Object(v.jsx)("label",{htmlFor:"rentFrom",children:"Rent from: "}),Object(v.jsx)("input",{type:"date",name:"rentFrom",id:"rentFrom",value:r,min:Object(O.a)(new Date,"y-MM-d"),onChange:function(t){return e.handleChange(t)}})]}),Object(v.jsxs)("span",{className:"item-page-form-field",children:[Object(v.jsx)("label",{htmlFor:"rentUntil",children:"Rent until: "}),Object(v.jsx)("input",{type:"date",name:"rentUntil",id:"rentUntil",value:s,min:Object(O.a)(new Date,"y-MM-d"),onChange:function(t){return e.handleChange(t)}})]}),Object(v.jsx)("input",{className:"item-page-rent-button item-page-form-field",type:"button",value:"Rent item",onClick:this.submitForm}),Object(v.jsx)("br",{}),i&&Object(v.jsx)("p",{className:"item-page-error",children:i}),u&&Object(v.jsx)("p",{children:"Item successfully rented"})]}),!t.is_available&&Object(v.jsx)("div",{children:Object(v.jsx)("span",{children:"This item is not currently available to be rented"})})]})}),l&&Object(v.jsx)("div",{className:"item-page-management",children:Object(v.jsxs)("div",{children:[t.is_available&&Object(v.jsx)("button",{className:"item-page-set-unavailable",onClick:this.changeItemAvailability,children:"Available for rental"}),!t.is_available&&Object(v.jsx)("button",{className:"item-page-set-available",onClick:this.changeItemAvailability,children:"Unavailable for rental"})]})}),Object(v.jsxs)("div",{className:"item-page-info",children:[Object(v.jsx)("h2",{children:"Description"}),d?Object(v.jsxs)("p",{children:[Object(v.jsx)("textarea",{className:"edit-box",type:"text",name:"description",id:"description",rows:"5",value:n.description,onChange:function(t){return e.handleEditChangeDescription(t)}}),Object(v.jsx)("button",{className:"cancel-edit",onClick:this.changeEditModeDescription,children:"X"}),Object(v.jsx)("button",{className:"confirm-edit",onClick:this.updateItemDescriptionValue,children:"OK"})]}):Object(v.jsxs)("p",{children:[t.description," ",l&&Object(v.jsx)("button",{className:"edit-button",onClick:this.changeEditModeDescription,children:"Edit"})]}),o&&Object(v.jsx)("p",{className:"item-page-error",children:o})]}),t.owner_id>40&&!l&&this.props.user&&Object(v.jsx)("div",{className:"item-page-chat",children:Object(v.jsx)(E,{ownerName:"".concat(t.first_name).concat(t.owner_id),loggedInUser:"".concat(this.props.user.first_name).concat(this.props.user.id),secret:this.props.user.email})})]})]})]})}}]),n}(a.Component),M=(n(178),n(36)),P=(n(71),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.review;return Object(v.jsxs)("section",{id:"review-body",children:[Object(v.jsxs)("h1",{id:"reviewer_name",children:[e.first_name," ",e.last_name]}),Object(v.jsx)("h1",{id:"review-title",children:e.title}),Object(v.jsx)("h2",{id:"review_content",children:e.content}),Object(v.jsxs)("p",{id:"how_long_ago",children:[e.howLongAgo," ago"]}),Object(v.jsxs)("p",{id:"rating",children:["rating: ",e.rating,"/5"]})]})}}]),n}(r.a.Component)),T=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).state={review:"",rating:null,reviewAdded:!1},e}return Object(d.a)(n,[{key:"textInput",value:function(e){var t=e.target.value,n=e.target.name;this.setState(Object(f.a)({},n,t))}},{key:"changeStarRating",value:function(e){var t=e.target.value;t=parseInt(t),this.setState({rating:t})}},{key:"submitUserReview",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state,a=n.review,r=n.rating,s=n.title,e.next=4,fetch("".concat("https://rent-a-thing.herokuapp.com/","/postUserReview"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({review:a,star_rating:r,user:this.props.user,title:s})});case 4:e.sent;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this,a=this.state,r=a.review,s=a.title,i=a.reviewAdded;if(console.log(this.props),i)return Object(v.jsx)(b.a,{to:"/profile"});var c=this.props.user;return Object(v.jsxs)("section",{id:"review-body",children:[Object(v.jsx)("p",{children:"Leave a review:"}),Object(v.jsxs)("form",{children:[Object(v.jsx)("input",(e={id:"new_review_title",placeholder:"Review title",type:"text",name:"title"},Object(f.a)(e,"id","title"),Object(f.a)(e,"value",s),Object(f.a)(e,"onChange",(function(e){return n.textInput(e)})),e)),Object(v.jsx)("textarea",(t={id:"new_review_input",name:"review",rows:"4"},Object(f.a)(t,"id","new_review"),Object(f.a)(t,"type","text"),Object(f.a)(t,"value",r),Object(f.a)(t,"onChange",(function(e){return n.textInput(e)})),t))," ",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("select",{name:"rating",id:"rating",onChange:function(e){return n.changeStarRating(e)},children:[Object(v.jsxs)("option",{value:"",children:["Give ",c.first_name," a star rating"]}),Object(v.jsx)("option",{value:"1",children:"1"}),Object(v.jsx)("option",{value:"2",children:"2"}),Object(v.jsx)("option",{value:"3",children:"3"}),Object(v.jsx)("option",{value:"4",children:"4"}),Object(v.jsx)("option",{value:"5",children:"5"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{id:"submit",type:"submit",value:"Submit review",onClick:function(e){n.submitUserReview(e),n.props.refreshPage()}})]})]})}}]),n}(r.a.Component),L=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).refresh=function(){console.log("refreshing!!!!"),a.forceUpdate()},a.state={reviews:[],user:""},a.refresh=a.refresh.bind(Object(M.a)(a)),a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props===t||""===this.props.user){e.next=4;break}return this.setState({user:this.props.user}),e.next=4,this.getReviews();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getReviews",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.user,e.next=3,fetch("".concat("https://rent-a-thing.herokuapp.com/","/getUserReviews"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.t0=this,e.next=10,a;case 10:e.t1=e.sent,e.t2={reviews:e.t1},e.t0.setState.call(e.t0,e.t2);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formattedReviews",value:function(){var e=this.state.reviews;return Object(v.jsx)("div",{id:"review_container",children:e.map((function(e,t){return console.log(t),Object(v.jsx)(P,{review:e},t)}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.justVisiting;return this.state.reviews[0]?Object(v.jsxs)("section",{id:"reviews",children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("h2",{children:"Reviews"}),this.formattedReviews(n)]}),n&&a&&Object(v.jsx)(T,{user:n})]}):Object(v.jsxs)("section",{id:"reviews",children:[Object(v.jsx)("h2",{children:"Reviews"}),Object(v.jsx)("p",{children:"Nothing to show..."}),n&&a&&Object(v.jsx)(T,{refreshPage:function(t){e.refresh()},user:n})]})}}]),n}(r.a.Component),U=(r.a.Component,r.a.Component,n(179),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={lending:[],borrowing:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/myrentals"),{method:"GET",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,n.lending;case 8:if(!e.sent){e.next=10;break}this.setState({lending:n.lending});case 10:return e.next=12,n.borrowing;case 12:if(!e.sent){e.next=14;break}this.setState({borrowing:n.borrowing});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.lending,t=this.state.borrowing;return Object(v.jsxs)("div",{className:"my-rentals-container",children:[Object(v.jsx)("h2",{children:"Lending"}),Object(v.jsxs)("div",{className:"lending",children:[e&&e.map((function(e){var t=e.id,n=e.name,a=e.price,r=e.rented_from,s=e.rented_until,i=e.trader_first_name,c=e.trader_last_name,o=e.img_url;return Object(v.jsx)(y,{name:n,price:a,rented_from:r,rented_until:s,img_url:o,trader_first_name:i,trader_last_name:c,cardType:"myrentals-page-card"},t)}))," ",!e[0]&&Object(v.jsx)("p",{children:"No items lended out"})]}),Object(v.jsx)("h2",{children:"Borrowing"}),Object(v.jsxs)("div",{className:"borrowing",children:[t&&t.map((function(e){var t=e.id,n=e.name,a=e.price,r=e.rented_from,s=e.rented_until,i=e.trader_first_name,c=e.trader_last_name,o=e.img_url;return Object(v.jsx)(y,{name:n,price:a,rented_from:r,rented_until:s,img_url:o,trader_first_name:i,trader_last_name:c,cardType:"myrentals-page-card"},t)}))," ",!t[0]&&Object(v.jsx)("p",{children:"No items borrowed"})]})]})}}]),n}(a.Component)),A=(n.p,n(90)),R=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).state={user:{},star_rating:"No reviews...",justVisiting:null,newLoad:!0},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("redirected"),e.prev=1,this.props.location.state.justVisiting){e.next=7;break}return this.props.cookieCheck(),e.next=6,this.getStarRating(this.props.state.user);case 6:this.setState({user:this.props.user,justVisiting:!1});case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.prev=11,this.setState({user:this.props.location.state.user,justVisiting:!0}),e.next=15,this.getStarRating(this.props.location.state.user);case 15:e.next=19;break;case 17:e.prev=17,e.t1=e.catch(11);case 19:case"end":return e.stop()}}),e,this,[[1,9],[11,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading..."!==this.state.star_rating){e.next=3;break}return e.next=3,this.getStarRating(this.state.user);case 3:this.props!==t&&this.forceUpdate();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStarRating",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/getStarRating"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,r=a.rating,isNaN(r)||this.setState({star_rating:r});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/getStarRating"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user,t=!1,n=this.state.newLoad;console.log(n);try{(t=this.props.location.state)&&(e=this.props.location.state.user)}catch(a){}return console.log(t),console.log(e.img_url),e?Object(v.jsxs)("section",{className:"flex_container",children:[Object(v.jsxs)("div",{id:"left",children:[Object(v.jsx)("img",{src:e.img_url,id:"profile_picture"}),Object(v.jsx)("h1",{children:"".concat(e.first_name," ").concat(e.last_name)}),Object(v.jsxs)("p",{children:["Email: ",Object(v.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})]}),Object(v.jsxs)("p",{children:["Average rating: ",this.state.star_rating]}),Object(v.jsxs)("p",{children:["City: ",e.city]}),Object(v.jsxs)("p",{children:["User since: ",e.created_at.slice(0,4)]})]}),Object(v.jsx)("div",{id:"centre_spacer"}),Object(v.jsxs)("div",{id:"right",children:[!t&&Object(v.jsx)(U,{}),Object(v.jsx)(L,{justVisiting:t,user:e})]})]}):Object(v.jsx)("section",{children:"Loading..."})}}]),n}(r.a.Component),B=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).initialState={name:"",nameCharacterLimit:35,description:"",descriptionCharacterLimit:100,categories:null,price:null,category:null,age_restriction:null,owner_id:null,img_url:"",previous_submit_successful:!1},e.state=e.initialState,e.handleImgUrl=function(t){e.setState({img_url:t})},e.handleChange=function(t){console.log("HANDLE CHANGE FUNCTION");var n=t.target,a=n.name,r=n.value;if("name"===a)e.setState({name:r});else if("description"===a)e.setState({description:r});else if("category"===a)e.setState({category:parseInt(r,10)});else if("age_restriction"===a)e.setState({age_restriction:parseInt(r,10)});else if("price"===a){var s=parseFloat(r).toFixed(2);s=parseFloat(s),e.setState({price:s}),console.log(e.state.price)}},e.allFieldsEntered=function(){var t=e.state,n=t.name,a=t.description,r=t.price,s=t.category,i=t.age_restriction,c=t.img_url;return!(!n||!a||!r||!s||!i||!c)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/categories"),{method:"GET",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({categories:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetForm",value:function(){this.setState(this.initialState)}},{key:"handleSubmit",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s,i,c,o,l,h,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.resetForm(),n=this.state,a=n.name,r=n.description,s=n.price,i=n.category,c=n.age_restriction,o=n.img_url,l=this.props.user.id,h=this.props.user.city_id,e.next=7,fetch("".concat("https://rent-a-thing.herokuapp.com/","/postItem"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:r,price:s,category:i,age_restriction:c,ownerID:l,img_url:o,cityId:h})});case 7:return d=e.sent,e.next=10,d.json();case 10:p=e.sent,console.log(p,"fromBackend"),p.submitted&&this.setState({previous_submit_successful:!0}),console.log(this.state.previous_submit_successful);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateLive",value:function(e){var t=this.state,n=t.name,a=t.nameCharacterLimit,r=t.description,s=t.descriptionCharacterLimit,i=s-10,c=a-5;if(e===n&&n.length>c){var o=a-n.length;return 0===o?void 0:Object(v.jsxs)("p",{className:"error errorItemTitle",children:["Remaining characters: ",o,"/",a]})}if(e===r&&r.length>i){var u=s-r.length;return 0===u?void 0:Object(v.jsxs)("p",{className:"error errorItemDescription",children:["Remaining characters: ",u,"/",s]})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.nameCharacterLimit,r=t.description,s=t.descriptionCharacterLimit,i=t.price,c=t.category,o=t.age_restriction,u=t.categories;t.img_url;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{className:"centered",children:"Post an advert for an item to be made available for rental"}),Object(v.jsx)(I,{handleImgUrl:this.handleImgUrl}),Object(v.jsxs)("form",{className:"SubmissionForm SubmissionFormPostItem",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Item name: "}),Object(v.jsx)("input",{type:"text",name:"name",value:n,maxlength:a,onChange:this.handleChange}),Object(v.jsx)("div",{children:this.validateLive(n)})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Item description: "}),Object(v.jsx)("input",{type:"text",name:"description",value:r,maxlength:s,onChange:this.handleChange}),Object(v.jsx)("div",{children:this.validateLive(r)})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:" Price (\xa3): "}),Object(v.jsx)("input",{type:"number",name:"price",value:i,onChange:this.handleChange,step:"0.01",min:"0"})]}),u&&Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Select category: "}),Object(v.jsxs)("select",{name:"category",value:c,onChange:this.handleChange,children:[Object(v.jsx)("option",{children:"Please select a category"}),u.map((function(e){var t=e.id,n=e.name;e.description,e.imgurl;return Object(v.jsx)("option",{id:t,name:c,value:t,children:n},t)}))]})]}),Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Select age restriction: "}),Object(v.jsxs)("select",{name:"age_restriction",value:o,onChange:this.handleChange,children:[Object(v.jsx)("option",{children:"Please select an age restriction"}),Object(v.jsx)("option",{value:"1",children:"No restriction"}),Object(v.jsx)("option",{value:"18",children:"18 and over"})]})]}),Object(v.jsx)("input",{disabled:!this.allFieldsEntered(),type:"submit",value:"Post item"})]})]})}}]),n}(a.Component),H=(n(146),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"category",onClick:function(){return e.props.handleClick(e.props.id)},children:[Object(v.jsxs)("div",{id:"info_container",children:[Object(v.jsx)("h2",{children:this.props.name}),Object(v.jsx)("h2",{children:this.props.description})]}),Object(v.jsx)("div",{id:"img_container",children:Object(v.jsx)("img",{id:"category_card_img",src:this.props.imgurl,alt:this.props.id})})]})}}]),n}(a.Component)),J=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={categories:[],hasChosen:!1,chosenValue:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.cookieCheck(),e.next=3,fetch("".concat("https://rent-a-thing.herokuapp.com/","/categories"),{method:"GET",credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({categories:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(e){this.setState({chosenValue:e}),this.setState({hasChosen:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.categories,a=t.hasChosen,r=t.chosenValue;return a?(console.log("CHOSEN CATEGORY VALUE: "+r),Object(v.jsx)(C,{searchParams:{categoryId:r},onHomePage:!1})):0===n.length?Object(v.jsx)("p",{children:"Loading...."}):Object(v.jsx)("div",{className:"item-list",children:n.map((function(t){var n=t.id,a=t.name,r=t.description,s=t.imgurl;return Object(v.jsx)(H,{id:n,name:a,description:r,imgurl:s,handleClick:function(t){return e.handleClick(t)}},n)}))})}}]),n}(a.Component),V=(n(343),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={individualData:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,r,s,i,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.id,a=t.name,r=t.cv_img,s=t.description,i=t.email,c=t.github_link,o=t.linkedin_link,l={id:n,name:a,cv_img:r,description:s,email:i,github_link:c,linkedin_link:o},this.setState({individualData:l});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.individualData;return t?Object(v.jsxs)("div",{className:"category",onClick:function(){return e.props.handleClick(t)},children:[Object(v.jsx)("div",{id:"info_container",children:Object(v.jsx)("h2",{children:t.name})}),Object(v.jsx)("div",{id:"img_container",children:Object(v.jsx)("img",{id:"category_card_img",className:"things-page-card-img",src:"logo192.png",alt:t.name,style:{height:"310px"}})})]}):Object(v.jsx)("h1",{children:"Loading..."})}}]),n}(a.Component)),G=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{className:"navButton",onClick:function(){return e.props.backToTeam()},children:"Back to Team"}),Object(v.jsxs)("div",{class:"flex-container",children:[Object(v.jsx)("div",{class:"flex-child teamMemberPic",children:Object(v.jsx)("img",{src:"logo512.png",alt:this.props.id})}),Object(v.jsxs)("div",{class:"flex-child teamMemberInfo",children:[Object(v.jsx)("h1",{className:"underline",children:this.props.chosenIndividual.name}),Object(v.jsx)("h2",{className:"infoBox",children:this.props.chosenIndividual.description}),Object(v.jsxs)("div",{className:"infoBox",children:[Object(v.jsxs)("h2",{children:["Email: ",this.props.chosenIndividual.email]}),Object(v.jsxs)("h2",{children:["GitHub: ",Object(v.jsxs)("a",{href:this.props.chosenIndividual.github_link,children:[" ",this.props.chosenIndividual.github_link," "]})," "]}),Object(v.jsxs)("h2",{children:["LinkedIn: ",Object(v.jsxs)("a",{href:this.props.chosenIndividual.linkedin_link,children:[" ",this.props.chosenIndividual.linkedin_link," "]})," "]})]})]})]})]})}}]),n}(a.Component),W=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={teamMembers:[],hasChosen:!1,chosenIndividual:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.cookieCheck(),e.next=3,fetch("".concat("https://rent-a-thing.herokuapp.com/","/teamMembers"),{method:"GET",credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log(n),this.setState({teamMembers:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(e){console.log(e),this.setState({chosenIndividual:e}),this.setState({hasChosen:!0})}},{key:"backToTeam",value:function(){this.setState({hasChosen:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.teamMembers,a=t.hasChosen,r=t.chosenIndividual;return a?Object(v.jsx)(G,{chosenIndividual:r,backToTeam:function(t){return e.backToTeam(t)}}):0===n.length?Object(v.jsx)("p",{children:"Loading...."}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{children:"Meet the team!"}),Object(v.jsx)("h1",{children:"Software Engineers:"}),Object(v.jsx)("div",{className:"item-list",children:n.map((function(t){var n=t.id,a=t.name,r=t.cv_img,s=t.description,i=t.email,c=t.github_link,o=t.linkedin_link;return Object(v.jsx)(V,{id:n,name:a,cv_img:r,description:s,email:i,github_link:c,linkedin_link:o,handleClick:function(t){return e.handleClick(t)}},n)}))})]})}}]),n}(a.Component);n(344);function K(e){var t=e.user;return console.log(t.first_name+t.id),Object(v.jsx)(A.d,{height:"99vh",userName:"".concat(t.first_name).concat(t.id),userSecret:t.email,projectID:"738df1f7-4780-4c48-b34f-0938273bcb5d",renderChatSettings:function(){},renderNewChatForm:function(){}})}var Y=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1,user:"",redirect:!1},e}return Object(d.a)(n,[{key:"componentWillMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cookieCheck();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.redirect!==n.redirect&&this.setState({redirect:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cookieCheck",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkWhoIsSignedIn();case 2:t=e.sent,this.toggleLoggedIn(t),this.setUser(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkWhoIsSignedIn",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/checkWhoIsSignedIn"),{method:"GET",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,n;case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLoggedIn",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?this.setState({isLoggedIn:!0}):this.setState({isLoggedIn:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setUser",value:function(e){this.setState((function(t){return Object(c.a)(Object(c.a)({},t),{},{user:e})}))}},{key:"logout",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://rent-a-thing.herokuapp.com/","/logout"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:if(!e.sent){e.next=10;break}return this.setState({redirect:!0}),e.next=10,this.cookieCheck();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.redirect,a=t.isLoggedIn,r=t.user;t.hasSearched,t.searchParams;return Object(v.jsxs)(j.a,{children:[Object(v.jsx)("div",{className:"header",children:"RENT-A-THING"}),!a&&Object(v.jsxs)("nav",{className:"navBar",children:[Object(v.jsx)(j.c,{className:"navButton noUnderline",to:"/home",activeClassName:"active",children:"Home"}),Object(v.jsx)(j.c,{className:"navButton noUnderline",to:"/categories",activeClassName:"active",children:"Categories"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/about",activeClassName:"active",children:"About"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/login",activeClassName:"active",children:"Login"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/createaccount",activeClassName:"active",children:"Create Account"})]}),a&&Object(v.jsxs)("nav",{className:"navBar",children:[Object(v.jsx)(j.c,{className:"navButton noUnderline",to:"/home",activeClassName:"active",children:"Home"}),Object(v.jsx)(j.c,{className:"navButton noUnderline",to:"/categories",activeClassName:"active",children:"Categories"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/about",activeClassName:"active",children:"About"}),Object(v.jsx)("div",{className:"navButton floatRight noUnderline",onClick:function(){e.logout()},children:"Logout"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/myAccount",activeClassName:"active",children:"Account"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/postItem",activeClassName:"active",children:"Post a new item"}),Object(v.jsx)(j.c,{className:"navButton floatRight noUnderline",to:"/messages",activeClassName:"active",children:"My Messages"})]}),n&&Object(v.jsx)(b.a,{to:"/"}),Object(v.jsx)("main",{children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{exact:!0,path:["/","/home"],children:Object(v.jsx)(C,{cookieCheck:function(){return e.cookieCheck()},onHomePage:!0})}),Object(v.jsx)(b.b,{exact:!0,path:"/categories",children:Object(v.jsx)(J,{cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/createaccount",children:Object(v.jsx)(N,{cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/myaccount",children:Object(v.jsx)(R,{user:r,cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/about",children:Object(v.jsx)(W,{cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/login",children:Object(v.jsx)(D,{cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/Item",children:Object(v.jsx)(F,{user:r,cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/postitem",children:Object(v.jsx)(B,{user:r,cookieCheck:function(){return e.cookieCheck()()}})}),Object(v.jsx)(b.b,{path:"/myrentals",children:Object(v.jsx)(U,{cookieCheck:function(){return e.cookieCheck()}})}),Object(v.jsx)(b.b,{path:"/visitingUser",render:function(e){return Object(v.jsx)(R,Object(c.a)({},e))}}),Object(v.jsx)(b.b,{path:"/messages",children:Object(v.jsx)(K,{user:r,cookieCheck:function(){return e.cookieCheck()}})})]})}),Object(v.jsxs)("div",{className:"footer",children:[Object(v.jsx)("p",{children:"Legal stuff | Contact info | etc."}),a&&Object(v.jsxs)("p",{children:["Logged in as ",r.first_name]})]})]})}}]),n}(a.Component);i.a.render(Object(v.jsx)(Y,{}),document.getElementById("root"))},40:function(e,t,n){},71:function(e,t,n){},95:function(e,t,n){}},[[345,1,2]]]);
//# sourceMappingURL=main.8d1b73f9.chunk.js.map